<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Munei's Tourism Students Hangman</title>
  <style>
    :root {
      /* Theme colours */
      --primary-bg: linear-gradient(135deg, #0e2953, #04294b);
      --card-bg: rgba(255, 255, 255, 0.1);
      --accent: #2563eb;
      --button-bg: #1d4ed8;
      --button-bg-disabled: #4b5563;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: var(--primary-bg);
      color: #f1f5f9;
    }
    header {
      width: 100%;
      padding: 1rem;
      text-align: center;
      backdrop-filter: blur(4px);
      background: var(--card-bg);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    header h1 {
      font-size: 1.6rem;
      font-weight: 600;
    }
    main {
      flex: 1;
      width: 100%;
      max-width: 600px;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
    }
    /* Hangman graphic */
    #hangman-container {
      width: 200px;
      height: 260px;
    }
    #hangman-container svg {
      width: 100%;
      height: 100%;
    }
    .part { display: none; stroke: #f1f5f9; stroke-width: 4; stroke-linecap: round; }
    /* Hint and word */
    #hint {
      font-size: 0.9rem;
      opacity: 0.8;
      text-align: center;
      min-height: 1.2rem;
    }
    #word-display {
      font-size: 2rem;
      letter-spacing: 0.6rem;
      text-align: center;
      word-break: break-all;
      min-height: 2.5rem;
    }
    /* Keyboard */
    #keyboard {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
      gap: 0.4rem;
      width: 100%;
    }
    #keyboard button {
      padding: 10px;
      border: none;
      border-radius: 6px;
      background: var(--button-bg);
      color: #f1f5f9;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s;
    }
    #keyboard button:hover:not(:disabled) {
      background: var(--accent);
    }
    #keyboard button:disabled {
      background: var(--button-bg-disabled);
      cursor: not-allowed;
    }
    /* Scoreboard and status */
    #scoreboard, #status {
      font-size: 1rem;
      min-height: 1.2rem;
    }
    /* Control buttons */
    #controls {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      justify-content: center;
    }
    #controls button {
      padding: 0.6rem 1rem;
      border: none;
      border-radius: 6px;
      background: var(--accent);
      color: #f1f59;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s;
    }
    #controls button:disabled {
      background: var(--button-bg-disabled);
      cursor: not-allowed;
    }
    /* Gun and bullet */
    #gun-container {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 60px;
      height: 30px;
      z-index: 50;
    }
    #gun {
      position: relative;
      width: 60px;
      height: 30px;
      background: #333;
      border-radius: 4px;
    }
    .bullet {
      position: absolute;
      top: 12px;
      left: 60px;
      width: 8px;
      height: 4px;
      background: #fca311;
      border-radius: 2px;
      animation: bullet-move 1s linear forwards;
    }
    @keyframes bullet-move {
      from { transform: translateX(0); }
      to { transform: translateX(100vw); }
    }
  </style>
</head>
<body>
  <header>
    <h1>Munei's Tourism Students Hangman</h1>
  </header>
  <main>
    <div id="scoreboard"></div>
    <div id="hangman-container">
      <svg viewBox="0 0 120 200">
        <!-- Gallows -->
        <line x1="10" y1="190" x2="110" y2="190" stroke="#94a3b8" stroke-width="6" />
        <line x1="30" y1="190" x2="30" y2="20" stroke="#94a3b8" stroke-width="6" />
        <line x1="28" y1="20" x2="80" y2="20" stroke="#94a3b8" stroke-width="6" />
        <line x1="78" y1="20" x2="78" y2="40" stroke="#94a3b8" stroke-width="6" />
        <!-- Body parts -->
        <circle id="head" class="part" cx="78" cy="55" r="15" fill="none" />
        <line id="body" class="part" x1="78" y1="70" x2="78" y2="120" />
        <line id="left-arm" class="part" x1="78" y1="90" x2="60" y2="100" />
        <line id="right-arm" class="part" x1="78" y1="90" x2="96" y2="100" />
        <line id="left-leg" class="part" x1="78" y1="120" x2="60" y2="150" />
        <line id="right-leg" class="part" x1="78" y1="120" x2="96" y2="150" />
      </svg>
    </div>
    <div id="hint"></div>
    <div id="word-display"></div>
    <div id="keyboard"></div>
    <div id="status"></div>
    <div id="controls">
      <button id="reveal">Reveal Letter</button>
      <button id="skip">Skip</button>
      <button id="next-round" style="display:none;">Next Round</button>
    </div>
  </main>
  <div id="gun-container">
    <div id="gun"></div>
  </div>
  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    // Word list and hints extracted from Chapter 8 Tourism Product Development
    const WORDS = [
      { word: "intangible", hint: "Cannot be touched, bought as a dream or concept" },
      { word: "inseparability", hint: "Consumed at the destination, inseparable from provider" },
      { word: "perishability", hint: "If not used, the service is lost" },
      { word: "heterogeneity", hint: "Services vary because humans serve humans" },
      { word: "seasonality", hint: "Demand fluctuates with seasons" },
      { word: "complementarity", hint: "Tourism products are consumed as packages" },
      { word: "identify", hint: "Finding a market gap for a product" },
      { word: "resources", hint: "People, finances, equipment, facilities" },
      { word: "swot", hint: "Strengths, Weaknesses, Opportunities, Threats" },
      { word: "pestel", hint: "Political, Economic, Social, Technological, Environmental, Legal" },
      { word: "marketingmix", hint: "Combination of product, place, price, promotion" },
      { word: "promotion", hint: "Activities like advertising and PR" },
      { word: "launch", hint: "Introducing the product to the market" },
      { word: "monitoring", hint: "Continuous evaluation of impacts" },
      { word: "overdraft", hint: "Short-term credit facility" },
      { word: "factoring", hint: "Selling receivables for immediate cash" },
      { word: "leasing", hint: "Accessing assets without ownership" }
    ];

    // Game state
    let chosenWord;
    let masked;
    let wrongGuesses;
    const maxWrong = 6;
    let score = 0;
    let highScore = parseInt(localStorage.getItem('hangmanHighScore')) || 0;
    let revealUsed = false;
    // DOM elements
    const hintElem = document.getElementById('hint');
    const wordDisplay = document.getElementById('word-display');
    const keyboardElem = document.getElementById('keyboard');
    const statusElem = document.getElementById('status');
    const scoreboardElem = document.getElementById('scoreboard');
    const controls = {
      revealBtn: document.getElementById('reveal'),
      skipBtn: document.getElementById('skip'),
      nextRoundBtn: document.getElementById('next-round')
    };
    const parts = ['head','body','left-arm','right-arm','left-leg','right-leg'];
    const gunContainer = document.getElementById('gun-container');

    function updateScoreboard() {
      scoreboardElem.textContent = `Score: ${score} | High Score: ${highScore}`;
    }

    function initGame(resetScore = false) {
      // Optionally reset score when skip or losing
      if (resetScore) {
        score = 0;
      }
      revealUsed = false;
      controls.revealBtn.disabled = false;
      controls.skipBtn.disabled = false;
      controls.nextRoundBtn.style.display = 'none';
      // Pick a new word
      const obj = WORDS[Math.floor(Math.random() * WORDS.length)];
      chosenWord = obj.word.toUpperCase();
      masked = Array.from(chosenWord).map(ch => (ch === ' ' ? ' ' : '_'));
      wrongGuesses = 0;
      hintElem.textContent = obj.hint; // show hint automatically
      wordDisplay.textContent = masked.join(' ');
      statusElem.textContent = `Lives: ${maxWrong - wrongGuesses}`;
      // Hide parts
      parts.forEach(part => {
        const el = document.getElementById(part);
        if (el) el.style.display = 'none';
      });
      // Build keyboard
      keyboardElem.innerHTML = '';
      const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
      letters.forEach(letter => {
        const btn = document.createElement('button');
        btn.textContent = letter;
        btn.addEventListener('click', () => handleGuess(letter, btn));
        keyboardElem.appendChild(btn);
      });
      updateScoreboard();
    }

    function handleGuess(letter, btn) {
      if (btn) btn.disabled = true;
      let correct = false;
      for (let i = 0; i < chosenWord.length; i++) {
        if (chosenWord[i] === letter) {
          masked[i] = letter;
          correct = true;
        }
      }
      if (correct) {
        wordDisplay.textContent = masked.join(' ');
      } else {
        wrongGuesses++;
        revealPart(wrongGuesses);
        statusElem.textContent = `Lives: ${maxWrong - wrongGuesses}`;
        fireBullet();
      }
      checkEnd();
    }

    function revealPart(count) {
      if (count <= parts.length) {
        const partId = parts[count - 1];
        const el = document.getElementById(partId);
        if (el) el.style.display = 'block';
      }
    }

    function fireBullet() {
      // create bullet element and animate across the screen
      const bullet = document.createElement('div');
      bullet.className = 'bullet';
      gunContainer.appendChild(bullet);
      bullet.addEventListener('animationend', () => {
        bullet.remove();
      });
    }

    function checkEnd() {
      if (!masked.includes('_')) {
        statusElem.textContent = 'Congratulations! You guessed the word!';
        score++;
        if (score > highScore) {
          highScore = score;
          localStorage.setItem('hangmanHighScore', highScore.toString());
        }
        updateScoreboard();
        celebrate();
        endGame(true);
      } else if (wrongGuesses >= maxWrong) {
        statusElem.textContent = `Game Over! The word was: ${chosenWord}`;
        // Reset score since lost
        if (score > 0) {
          score = 0;
        }
        updateScoreboard();
        endGame(false);
      }
    }

    function celebrate() {
      const duration = 2 * 1000;
      const end = Date.now() + duration;
      (function frame() {
        confetti({ particleCount: 4, angle: 60, spread: 55, origin: { x: 0 } });
        confetti({ particleCount: 4, angle: 120, spread: 55, origin: { x: 1 } });
        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      })();
    }

    function endGame(won) {
      // disable keyboard
      Array.from(keyboardElem.children).forEach(btn => {
        btn.disabled = true;
      });
      controls.revealBtn.disabled = true;
      controls.skipBtn.disabled = true;
      // Show next round button
      controls.nextRoundBtn.style.display = 'inline-block';
      // If lost, reveal the word fully
      if (!won) {
        wordDisplay.textContent = chosenWord.split('').join(' ');
      }
    }

    // Reveal a random unguessed letter
    controls.revealBtn.addEventListener('click', () => {
      if (revealUsed) return;
      // find indices of hidden letters
      const hiddenIndices = [];
      for (let i = 0; i < chosenWord.length; i++) {
        if (masked[i] === '_') hiddenIndices.push(i);
      }
      if (hiddenIndices.length > 0) {
        const randomIndex = hiddenIndices[Math.floor(Math.random() * hiddenIndices.length)];
        const letter = chosenWord[randomIndex];
        // Simulate guess for this letter
        const btn = Array.from(keyboardElem.children).find(b => b.textContent === letter);
        handleGuess(letter, btn);
        revealUsed = true;
        controls.revealBtn.disabled = true;
      }
    });
    // Skip the current word and start new game (score resets)
    controls.skipBtn.addEventListener('click', () => {
      initGame(true);
    });
    // Start next round after a win or loss (no score reset after win)
    controls.nextRoundBtn.addEventListener('click', () => {
      initGame(false);
    });

    // Initialize on load
    initGame(false);
  </script>
</body>
</html>
